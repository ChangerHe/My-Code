<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

    <script>
        //1. Array.from() 方法将两类对象转为真正的数组:类数组对象和可遍历对象 
        {


            let arrayLike = {
                '0': 'a',
                '1': 'b',
                '2': 'c',
                length: 3
            }
            var arr1 = Array.prototype.slice.call(arrayLike)
            console.log(arr1)

            let arr2 = Array.from(arrayLike)
            console.log(arr2)
        }
        // 在实际应用中,我们最常见的对象是DOM操作返回的NodeList集合,同样的,使用这个方法就可以实现将相应的类数组对象转换为数组
        {
            let nameSet = new Set(['a', 'b'])
            var a = Array.from(nameSet)
            console.log(a)
        }

        // 如果对象是一个真的数组,那么使用Array.from() 方法会返回一个和原来一模一样的新数组
        {
            let a = [1, 2, 3]
            let b = Array.from(a)
            a = [3, 2, 1]
            console.log(a) // [3,2,1]
            console.log(b) // [1,2,3]
        }

        // 扩展运算符也可以将某些数据结构转为数组
        // 那么,我们可以对函数的变量arguments进行相应的处理,让其变成真正的数组
        function foo() {
            var args = [...arguments]
        }

        // 那么同样的,我们也可以对HTML的元素对象进行相应的操作
        [...document.querySelectorAll('div')]

        // 扩展运算符背后调用的是遍历器接口, 如果一个对象没有部署该接口就无法进行转换

        // 但是,所有的转换,一个最大的前提条件是,必须要有一个length对象,保存一个数值,没有这个属性的话是没有办法转为数组的

        // 对于没有部署Array.from() 方法的浏览器,我们可以使用对应的老方法和新方法进行结合模拟

        {
            const toArray = (() =>
                Array.from ? Array.from : obj => [].slice.call(obj)
            )
        }

        // Array.from 方法还可以接受第二个参数,作用类似于数组的map方法,用来对每个元素进行处理
        // 并将处理后的值放入返回的数组
        {
            let arrayLike = {
                '0': 'a',
                '1': 'b',
                '2': 'c',
                length: 3
            }
            Array.from(arrayLike, x => x * x)
                // 其实上面的方法就等同于下面的方法
            Array.from(arrayLike).map(function(x) {
                    return x * x
                })
                // 上面是使用ES5的方法所写的方法,我们可以将函数转换为箭头函数的形式
            Array.from(arrayLike).map(x => x * x)
        }
    </script>
</body>

</html>